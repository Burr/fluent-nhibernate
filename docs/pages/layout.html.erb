<%
def index(current_page, pages)
  html = '<ul>'

  pages.each do |page|
    prefix = '../' * current_page.depth
    if page.has_children?
      html << '<li><dl>'
      html << "<dt>#{page.name}</dt>"
      page.children.each do |child|
        html << "<dd><a href=\"#{prefix + child.url}\">#{child.name}</a></dd>"
      end
      html << "</dl></li>"
    else
      html << "<li><a href=\"#{prefix + page.url}\">#{page.name}</a></li>"
    end
  end

  html << '</ul>'
  html
end
%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title><%= page.title %> - Guides @ Fluent NHibernate</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="description" content="Fluent NHibernate, a statically compiled alternative to NHibernate's standard hbm xml mapping.">
    <meta name="keywords" content="orm, object relational mapping, nhibernate, mapping, hbm, xml, nh, fnh, fluent nhibernate, fluent interface, method chaining, static reflection" />
    <link rel="stylesheet" href="<%= "../" * page.depth -%>stylesheets/main.css" type="text/css" />
    <link rel="icon" type="image/png" href="images/favicon.png" />
  </head>
  <body>
    <div id="see-also">
      <span>More at <a href="http://fluentnhibernate.org">fluentnhibernate.org</a>:</span>
      <a href="http://fluentnhibernate.org">Overview</a> |
      <a href="http://fluentnhibernate.org/downloads">Downloads</a> |
      <a href="http://wiki.fluentnhibernate.org">Wiki</a> |
      <a href="http://fluentnhibernate.org/api/index.htm">API Documentation</a> |
      <a href="http://github.com/jagregory/fluentnhibernate">Code</a> |
      <a href="http://support.fluentnhibernate.org">Support</a>
      <div class="bottom"></div>
    </div>
    
    <h1><a href="<%= '../' * page.depth -%>index.htm">Fluent NHibernate <span class="guides">guides</span></a></h1>
    
    <div id="index">
      <%= index page, pages %>
      <script type="text/javascript"><!--
      google_ad_client = "pub-0109731718957549";
      /* fnh half-banner */
      google_ad_slot = "5099640624";
      google_ad_width = 234;
      google_ad_height = 60;
      //-->
      </script>
      <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
    </div>
    
    <div id="content">
      <div id="body">
        <%= "<h2>#{page.title}</h2>" unless page.title.nil? %>
        <%= yield %>
      </div>
      
      <p class="copy">Fluent NHibernate is &copy; 2008-2009 <a href="http://jagregory.com">James Gregory</a> and contributors under the
        <a href="http://fluent-nhibernate.googlecode.com/svn/trunk/LICENSE.txt">BSD license</a>.</p>
    </div>
    
    <!-- google analytics stuff -->
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-3186192-5");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>
